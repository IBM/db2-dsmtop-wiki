---
title: Top Consumers - Connections
---

<h2>Purpose</h2>
<p>Find the connections (sessions) that have consumed the most resources over their lifetime.  This view is helpful for diagnosing problems where large numbers of small activities in aggregate are consuming excessive resources.  A common scenario of this type is applications loading data one row at a time using singleton inserts.  This can be very disruptive but each individual insert is tiny and so is the singleton transaction associated with it.  This view will highlight connections engaged in these sort of activities.</p>
<p>Note that this overlaps somewhat in functionality with the <a href="/developerworks/community/wikis/home?lang=en#!/wiki/Text%20Based%20Monitoring%20for%20DB2%20LUW%20-%20dsmtop/page/Sessions%20%28connections%29">Sessions (connections)</a> view.  If you go to the connections view, in counter mode, you could select various columns one at a time and sort by them to find the connections that have consumed the most CPU, read the most rows, etc.  This view provides a convenient way to get similar information in one step.</p>

<p><img alt="TopConsumers-Connections.png" lconnwikimacro="image" src="../images/TopConsumers-Connections.png" title="TopConsumers-Connections.png"/></p>

<h2>Histograms and Summaries (Gauges)</h2>
<p>&lt;link TBD&gt;</p>
<h2>Metrics Shown</h2>
<p>There is a grid, with a row for each resource that is tracked.  Each row names the resource and shows</p>
<ul ><li>Item no, so that the user can use sort to restore the grid to its canonical ordering if it has been sorted on some other column.</li><li>Server resource (CPU, Rows Read, etc.)</li><li>The application handle for the connection that has consumed the most of this resource.</li><li>What percentage of the resource this particular connection has consumed, relative to consumption by other connections.</li><li>How many rows read, CPU seconds used, etc.</li><li>The name of the application associated with this connection.</li><li>SQL text of most recently executed statement, if available.</li></ul>

<p><u>0  CPU Time</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.total_cpu_time</span></p>
<p><br/>
<u>1  Rows Read</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.rows_read</span></p>
<p><br/>
<u>2  Rows Returned</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.rows_returned</span></p>
<p><br/>
<u>3  Rows Written</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.rows_modified</span></p>
<p><br/>
<u>4  Logical Reads</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a></p>
<p  style="margin-bottom:5px;margin-left:40px;padding-top:2px;padding-bottom:2px;font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif"><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0001235.html?cp=SSEPGG_10.5.0&amp;lang=en" style="font-family:'courier new' , 'courier' , monospace">pool_data_l_reads</a><span style="font-family:'courier new' , 'courier' , monospace"> + </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0001238.html?lang=en" style="font-family:'courier new' , 'courier' , monospace">pool_index_l_reads</a><span style="font-family:'courier new' , 'courier' , monospace"> + </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0022731.html?lang=en" style="font-family:'courier new' , 'courier' , monospace">pool_xda_l_reads</a><span style="font-family:'courier new' , 'courier' , monospace"> + <a href="http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0060763.html?lang=en">pool_col_l_reads</a> +</span></p>
<p  style="margin-bottom:5px;margin-left:40px;padding-top:2px;padding-bottom:2px;font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif"><a href="http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0011302.html?lang=en">pool_temp_data_l_reads </a><span style="font-family:'courier new' , 'courier' , monospace;line-height:1.5">+ <a href="http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0011303.html?cp=SSEPGG_10.5.0&amp;lang=en">pool_temp_index_l_reads </a>+ <a href="http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0022738.html?cp=SSEPGG_10.5.0&amp;lang=en">pool_temp_xda_l_reads </a>+ <a href="http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.admin.mon.doc/doc/r0060873.html?cp=SSEPGG_10.5.0&amp;lang=en">pool_temp_col_l_reads</a></span></p>
<p><br/>
<u>5  IO r/w</u></p>

<p><br/>
<u>6  Memory</u></p>

<p><br/>
<u>7  Sort time</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.total_section_sort_time</span></p>
<p><br/>
<u>8  Num sorts</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.total_sorts</span></p>
<p><br/>
<u>9  Sort overflows</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.sort_overflows</span></p>
<p><br/>
<u>10 Num threshold violations</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.thresh_violations</span></p>
<p><br/>
<u>11 FCM Traffic</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a></p>
<p  style="margin-left:40px"><span style="font-family:'courier new' , 'courier' , monospace">fcm_send_volume + fcm_recv_volume</span></p>
<p><br/>
<u>12 Num agents</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.num_assoc_agents</span></p>
<p><br/>
<u>13 Num locks held</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.num_locks_held</span></p>
<p><br/>
<u>14 Lock Escalations</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_escals</span></p>
<p><br/>
<u>15 Lock timeouts</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_timeouts</span></p>
<p><br/>
<u>16 Lock Waits</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_waits</span></p>
<p><br/>
<u>17 Lock Wait Time</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_wait_time</span></p>
<p><br/>
<u>18 Lock Wait Time (Global)</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_wait_time_global</span></p>
<p><br/>
<u>19 Lock waits (global)</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.lock_waits_global</span></p>
<p><br/>
<u>20 CF Wait Time</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.cf_wait_time</span></p>
<p><br/>
<u>21 CF Waits</u></p>

<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Source: </span><a href="http://www-01.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.sql.rtn.doc/doc/r0053938.html?cp=SSEPGG_10.5.0%2F3-6-1-3-10-22&amp;lang=en" style="text-decoration:underline;color:rgb( 5 , 56 , 107 );font-family:'courier new' , 'courier' , monospace">mon_get_connection</a><span style="font-family:'courier new' , 'courier' , monospace">.cf_waits</span></p>

<h2>Default Sort Column</h2>
<p><span style="font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Item No, ascending</span></p>
<h2>Navigation</h2>
<p  style="margin-bottom:5px;padding-top:2px;padding-bottom:2px;font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Keyboard navigation: VBc</p>
<p  style="margin-bottom:5px;padding-top:2px;padding-bottom:2px;font-family:'helvetica neue' , 'helvetica' , 'arial' , sans-serif">Dedicated shortcut key: (none)</p>
<h6>Author: KevinLBeck</h6>